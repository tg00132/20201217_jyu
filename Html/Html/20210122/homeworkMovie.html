<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ìë°”ìŠ¤í¬ë¦½íŠ¸ - ì˜í™”ë°ì´í„°ë² ì´ìŠ¤ API</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        /* ì˜¤ë²„ë ˆì´ ì‹¤í–‰ì‹œ ë’· ë°°ê²½ ìŠ¤í¬ë¡¤ ë°©ì§€ */
        .stop-scrolling {
            /* height: 100%; */
            overflow: hidden;
        }

        h1 {
            width: 450px;
            margin: 0 auto;
            text-align: center;
            color: rgb(42, 95, 240);
            padding-top: 20px;
        }

        .subsubject {
            text-align: center;
        }

        p {
            padding: 8px 0px;
        }

        .container {
            display: flex;
            flex-flow: row wrap;
            justify-items: center;
            justify-content: center;
        }

        .container>div {
            flex-basis: 25%;
            flex: 0;
            margin: 8px;
            border: 1px solid rgb(252, 252, 252);
            padding: 8px;
            cursor: pointer;
            box-sizing: border-box;

        }

        .container>div:hover {
            border: 1px solid rebeccapurple;
        }

        .buttonWrapper {
            width: 100vs;
            text-align: center;
        }

        .more {
            width: 120px;
            padding: 8px 15px;
            margin: 10px auto;
        }

        /* ì˜¤ë²„ë ˆì´ ì„¤ì • */
        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 999;
            /* ì‹œì‘ì‹œ ë³´ì´ì§€ ì•Šê²Œ ì²˜ë¦¬ */
            visibility: hidden;
            opacity: 0;
            transition: all 0.5s;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* ì˜¤ë²„ë ˆì´ë¥¼ ë³´ì—¬ ì¤„ë•Œ ì‚¬ìš© */
        #overlay.show {
            visibility: visible;
            opacity: 1;
        }

        .close {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 36px;
            margin: 0;
            padding: 0;
            cursor: pointer;
            margin: 8px auto;
        }

        /* ì´ê±´ í…ŒìŠ¤í¬íƒ‘ ê¸°ì¤€ - ëª¨ë°”ì¼ì€ ë”°ë¡œ ì„¤ì •í•  í•„ìš”ê°€ ìˆë‹¤. */
        .youtube {
            width: 60%;
            height: 60%;
        }

        iframe {
            display: block;
            width: 100%;
        }

        .noVideo {
            color: white;
        }

        /* ëª¨ë°”ì¼ ì „ìš© */
        @media (max-width: 768px) {
            .youtube {
                width: 100%;
                height: 100%;
            }
        }
    </style>
</head>

<body class="">
    <h1>Mukbang</h1>
    <p class="subsubject">ë¨¹ì„ë•Œê°€ ì œì¼ í–‰ë³µí•˜ë‹¤</p>

    <div class="container">

        <div data-id="464052" onclick="openView(this)">
            <img src="homework_img/num1.png" width="500px">
            <h2>íŒ¨í‹°ê°€ 4ì¥, í˜ˆê´€íŒŒê´´ ë²„ê±°í‚¹ ìŠ¤íƒœì»¤4 ë¨¹ë°©</h2>
            <p class="overview">â–¶ì¹¨ì°©ë§¨ì˜ ã€ì‹ìš•ì €í•˜ ë‹¤ì´ì–´íŠ¸ ë¨¹ë°©ã€‘ <br>
                ì˜ìƒ ëª¨ìŒ: https://goo.gl/eUvjNe <br>
                <br>
                â–¶ì¹¨íˆ¬ë¶€ ì¸ê¸°ë™ì˜ìƒ: http://goo.gl/i7Uqj1<br>
                â–¶ì¹¨ì°©ë§¨ íŠ¸ìœ„ì¹˜ ì‹¤ì‹œê°„ë°©ì†¡: http://www.twitchtv/zilioner<br>
                <br>
                â–¶í¸ì§‘ì: ì „ìˆ˜ë§Œ (4í˜¸ ì¹¨íˆ¬ë¶€ìˆ˜í˜¸ì)<br>
                â–¶2021ë…„ 1ì›” 19ì¼ ë°©ì†¡ë¶„<br>

                #ì¹¨ì°©ë§¨ #ë²„ê±°í‚¹ #ìŠ¤íƒœì»¤4<br></p>
            <p class="release_date">ì—…ë¡œë“œ: 2021-01-21</p>
        </div>
        <div data-id="508442" onclick="openView(this)">
            <img src="homework_img/num2.png" width="500px">
            <h2>ì†Œê³ ê¸° 5ê°€ì§€ ë¶€ìœ„ 3kg ë¨¹ë°©</h2>
            <p class="overview"></p>
            <p class="release_date">ì—…ë¡œë“œ: 2020-12-25</p>
        </div>
        <div data-id="651571" onclick="openView(this)">
            <img src="homework_img/num3.png" width="500px">
            <h2>ê³ ê¸°ë¥¼ ì™•ì°½ ë•Œë ¤ë„£ì€ ë¼ì§€êµ­ë°¥ ë¨¹ë°©!"ê¹€ì¹˜ëŠ” í•œêµ­ì˜ ì „í†µ ìŒì‹ì…ë‹ˆë‹¤"</h2>
            <p class="overview">
                ê¹€ì¹˜ëŠ” í•œêµ­ì˜ ì „í†µ ìŒì‹ì…ë‹ˆë‹¤.<br>
                Kimchi is Korean traditional food.</p>
            <p class="release_date">ì—…ë¡œë“œ: 2021-01-20</p>
        </div>
        <div data-id="675327" onclick="openView(this)">
            <img src="homework_img/num4.png" width="500px">
            <h2>ì¯”ì•™, ë‹¤ì´ì–´í„° ë¹„ ì˜†ì—ì„œ ë§ˆíŠ¸ í†µì§¸ë¡œ ë¨¹ì–´ë²„ë¦¬ëŠ” ë¨¹ë°© (feat.ì€í‡´ ì´ìœ  ì·¨ì¤‘ ì§„ë‹´)|ì‹œì¦Œë¹„ì‹œì¦Œ EP.20</h2>
            <p class="overview">#ë¹„ #ì¯”ì–‘ #ë¨¹ë°©
                ë¹„ ìµœì•  ìœ íŠœë²„ ì¯”ì–‘ ë¨¹ë°© ì§ê´€â™¥ + ì§„ì§œ ì†”ì§íˆ ë°íˆëŠ” ì¯”ì–‘ ì€í‡´(í–ˆë˜) ì´ìœ <br>
                'ë‚˜ë¡œ ë°”ê¾¸ì' ì»´ë°± ë•Œë¬¸ì— 1ì¼ 1ì‹ ì¤‘ì¸ ë‹¤ì´ì–´í„° ë¹„, ì œëŒ€ë¡œ ê³ ë¬¸í•˜ëŠ” ëŒ€ë¦¬ ë¨¹ë°©</p>
            <p class="release_date">ì—…ë¡œë“œ: 2021-01-07</p>
        </div>
        <div data-id="529203" onclick="openView(this)">
            <img src="homework_img/num5.png" width="500px">
            <h2>ê²‰ë°”ì†ì´‰ ì˜¤ë¸í†µì‚¼ê²¹ê³¼ ì§„ì§œì¥ ë¨¹ë°©~!! ë¦¬ì–¼ì‚¬ìš´ë“œ social eating Mukbang(Eating Show)</h2>
            <p class="overview">
                ë¬¸ì˜ë©”ì¼ <br>
                ddeonggae@sandboxnetwork.net</p>
            <p class="release_date">ì—…ë¡œë“œ: 2021-01-15</p>
        </div>
        <div data-id="553604" onclick="openView(this)">
            <img src="homework_img/num6.png" width="500px">
            <h2>ê¼¬ë“¤ê¼¬ë“¤í•œ ì—´ë¼ë©´ ë¨¹ë°© (ft. ê¹€ì¥ê¹€ì¹˜, ì´ˆë°¥) Spicy Ramyeon Instant Noodles Mukbang</h2>
            <p class="overview">
                ğŸˆINSTAGRAM :https://www.instagram.com/SANGYOONCE <br>
                ğŸ“©sangyoonce@gmail.com (ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì¼í•¨)
            </p>
            <p class="release_date">ì—…ë¡œë“œ: 2020-12-22</p>


            <div id="overlay" class=""
                style="background-image: url(https://image.tmdb.org/t/p/w300//qJiaB4RJMM5Oh6A4rqrEOHQUJbu.jpg); background-size: auto; background-repeat: no-repeat;">
                <div class="youtube"></div>
                <img class="close" src="img/close_white.png">
            </div>
        </div>
</div>
            <script>
                let page = 1;
                const key = "90d4df026636f37944c3d598d27a9bde";
                const base_url = "https://image.tmdb.org/t/p/w300/";
                const container = document.querySelector(".container");
                const youtube = document.querySelector(".youtube");
                const overlay = document.querySelector("#overlay");
                const closeButton = document.querySelector(".close");
                let currentScrollY = "";

                //API ì„œë²„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
                function fetchMovie(page) {
                    const url =
                    `https://api.themoviedb.org/3/movie/upcoming?api_key=${key}&language=ko-KR&page=${page}`;
                    fetch(url)
                        .then(res => res.json())
                        .then(function (res) {
                            const movies = res.results;
                            movies.map(function (movie) {
                                //console.log(movie.title);
                                const div = document.createElement('div');
                                const output = `
                        <img src="${base_url + movie.poster_path}">
                        <h2>${movie.title}</h2>
                        <p class="overview">${movie.overview}</p>
                        <p class="release_date">ì—…ë¡œë“œ: ${movie.release_date}</p>
                    `;
                                div.innerHTML = output;
                                container.appendChild(464052);
                                // ì˜í™”ì˜ ì•„ì´ë””ë¥¼ div ì— ë„£ì–´ ì¤Œ - ë‚˜ì¤‘ì— ì´ê²ƒì„ get í•´ì„œ í™œìš©í•  ê²ƒì„.
                                //div.classList.add("movie");
                                div.setAttribute("data-id", movie.id);
                                div.setAttribute("onClick", "openView(this)");
                            });
                        })
                        .catch(erro => console.log(erro));
                };

                //ì¸ë„¤ì¼ í´ë¦­ì‹œ ì‹¤í–‰ ë  í•¨ìˆ˜ eventë¡œ DOM ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë¹¼ì„œ ì‚¬ìš©
                function openView(e) {
                    //ì˜í™”ì˜ ì•„ì´ë””ë¥¼ ê°€ì ¸ ì™”ë‹¤.
                    const movieId = e.getAttribute("data-id");
                    console.log(movieId);

                    //ë‹¤ì‹œ ìš”ì²­ì„ í•´ì„œ ìœ íŠœë¸Œ í”Œë ˆì´ìš© ì•„ì´ë””(key)ë¥¼ ê°€ì ¸ì™€ì•¼ í•œë‹¤. ì–¸ì–´ë¥¼ í•œêµ­ì–´ë¡œ í•œì •í•˜ë©´ ë¹„ë””ì˜¤ë¥¼ ì°¾ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.
                    const movieUrl = `https://api.themoviedb.org/3/movie/${movieId}/videos?api_key=${key}`;
                    fetch(movieUrl)
                        .then(res => res.json())
                        .then(function (res) {
                            let output = "";

                            if (res.results.length > 0) {
                                const youtubeId = res.results[0].key; //ì²«ë²ˆì¬ ì˜ìƒë§Œ ì‚¬ìš©í•˜ê¸° í•˜ì. ê°’ì´ ì—†ì„ ê²½ìš°ë„ ìˆìŒ.
                                output =
                                    `<iframe width="640" height="600" src="https://www.youtube.com/embed/E6GQHKf6h4A" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                            } else {
                                output = `<h3 class="noVideo">ì¬ìƒí•  ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤.</h3>`;
                                console.log(output);
                            }

                            youtube.innerHTML = output;
                        })
                        .catch(erro => console.log(erro));
                    //í¬ìŠ¤íŠ¸ì˜ urlì„ ê°€ì ¸ ì™”ë‹¤.
                    const posterImage = e.querySelector("img").src;
                    //ì˜¤ë²„ë ˆì´ë¥¼ ì—´ê³  ì˜ìƒì„ ì¶œë ¥ í•˜ì.

                    overlay.classList.add("show");
                    /*
                    visibility: visible;
            opacity: 1;
                    */
                    // overlay.classList.style
                    alert("!!!");
                    // overlay.style.opacity = 1;
                    // overlay.style.visibility = 'visible';
                    overlay.setAttribute("style",
                        `background-image: url(${posterImage}); background-size: auto; background-repeat: no-repeat;`
                        )
                    overlay.setAttribute("style",
                    `visibility: visible; opacity: 1;`);
                    //ë°°ê²½ body ìŠ¤í¬ë¡¤ ì¤‘ì§€
                    document.body.classList.add("stop-scrolling");

                }

                // í´ë¡œì¦ˆ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì˜¤ë²„ë ˆì´ show í´ë˜ìŠ¤ë¥¼ ì‚­ì œí•´ì„œ ì˜¤ë²„ë ˆì´ë¥¼ ì‚¬ë¼ì§€ê²Œ í•¨
                closeButton.addEventListener('click', () => {
                    // overlay.classList.remove("show");
                    
                    overlay.setAttribute("style",
                    `visibility: hidden; opacity: 0;`);
                    youtube.innerHTML = "";
                    //ìŠ¤í¬ë¡¤ ë°©ì§€ í•´ì œ
                    document.body.classList.remove("stop-scrolling");
                });


                //ìœˆë„ìš° ë¡œë“œì‹œ ê¸°ë³¸ìœ¼ë¡œ í•œë²ˆ í•¨ìˆ˜ ì‹¤í–‰í•¨.
                window.addEventListener('onLoad', fetchMovie());
            </script>



</body>